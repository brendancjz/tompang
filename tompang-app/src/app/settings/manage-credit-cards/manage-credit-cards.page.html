<app-header></app-header>
<ion-content class="hide-scroll-bar">
  <div>
    <ion-title class="page-name grey-color">
      Settings
    </ion-title>
    <hr class="horizontal-rule" />
    <ion-title class="sub-page-name grey-color">
      <div style="display: flex; align-items: center; justify-content: space-between;">
        Manage Credit Cards
        <ion-button color="tertiary" icon-only (click)="toggleAddCreditCardPage()">
          <ion-icon name="add-outline"></ion-icon>
        </ion-button>
      </div>

    </ion-title>
  </div>
  <hr class="horizontal-rule" />
  <div *ngIf="isDisplayingCCList">
    <div *ngFor="let creditCard of currentUser.creditCards">
      <ion-item>
        <div style="display: flex;justify-content: space-between;align-items:center;width: 100%;padding: 10px 0;">
          <div style="display: flex;">
            <ion-icon style="font-size: 24px;margin-right: 16px;" name="card-outline"></ion-icon>
            <div class="grey-color">
              <ion-label >{{creditCard.ccName}}</ion-label>
              <ion-label >{{formatCreditCardNumber(creditCard.ccNumber)}}</ion-label>
              <ion-label >{{creditCard.ccBrand}}</ion-label>
            </div>
          </div>

          <ion-button color="tertiary" class="button-icon" icon-only (click)="viewCreditCard(creditCard)">
            <ion-icon name="chevron-forward-outline"></ion-icon>
          </ion-button>
        </div>

      </ion-item>
    </div>
  </div>
  <div *ngIf="!isDisplayingCCList">
    <ion-title class="grey-color" style="font-size: 16px;margin-bottom: 10px;">Add New Credit Card</ion-title>
    <form (ngSubmit)="addCreditCard()">
      <div class="form-input">
        <ion-item lines="none">
          <ion-input class="grey-color" placeholder="Credit Card Brand" type="text" [(ngModel)]="newCreditCard.ccBrand" name="ccBrand" required maxlength="50"></ion-input>
          <ion-icon name="business-outline" slot="start"></ion-icon>
        </ion-item>
      </div>
      <div class="form-input">
        <ion-item lines="none">
          <ion-input class="grey-color" placeholder="XXXXXXXXXXXXXXXX" type="number" [(ngModel)]="newCreditCard.ccNumber" name="ccNumber" required minlength="16" maxlength="16"></ion-input>
          <ion-icon name="wallet-outline" slot="start"></ion-icon>
        </ion-item>
      </div>
      <div class="form-input">
        <ion-item lines="none">
          <ion-input class="grey-color" placeholder="Name on Credit Card" type="text" [(ngModel)]="newCreditCard.ccName" name="ccName" required maxlength="50"></ion-input>
          <ion-icon name="wallet-outline" slot="start"></ion-icon>
        </ion-item>
      </div>
      <div class="form-input">
        <ion-item lines="none">
          <ion-input class="grey-color" placeholder="CIV" type="number" [(ngModel)]="newCreditCard.ccCIV" name="ccName" required minlength="3" maxlength="3"></ion-input>
          <ion-icon name="wallet-outline" slot="start"></ion-icon>
        </ion-item>
      </div>
      <div class="form-input">
        <ion-item lines="none">
          <ion-input class="grey-color" placeholder="CIV" type="number" [(ngModel)]="newCreditCard.ccCIV" name="ccName" required minlength="3" maxlength="3"></ion-input>
          <ion-icon name="wallet-outline" slot="start"></ion-icon>
        </ion-item>
      </div>
      <div class="form-input input-button-div">
        <ion-button style="text-transform: initial;font-size: 16px;" color="tertiary"  type="reset">Clear</ion-button>
        <ion-button style="text-transform: initial;font-size: 16px;" color="tertiary" type="submit">Create</ion-button>
      </div>
    </form>
  </div>
</ion-content>
<app-footer></app-footer>
